import{u as _,j as e,L as t,r as v}from"./app-Cv6QHcjT.js";function L({contacts:i,sort:m,direction:x,search:N}){const{data:b,setData:g}=_({search:N||""}),f=s=>m===s&&x==="asc"?"desc":"asc",c=s=>m!==s?"↕︎":x==="asc"?"↑":"↓",k=s=>{s.preventDefault(),v.get(route("phone_numbers.index"),{search:b.search||"",sort:m||"name",direction:x||"asc"},{preserveScroll:!0,preserveState:!0,replace:!0})},S=()=>{g("search",""),v.get(route("phone_numbers.index"),{},{preserveScroll:!0,preserveState:!1,replace:!0})},d=s=>({href:route("phone_numbers.index"),data:{search:N||"",sort:s,direction:f(s)},preserveScroll:!0,preserveState:!0,replace:!0}),y=i?.data?.length>0;return e.jsxs("div",{className:"container my-4",children:[e.jsx("h1",{className:"mb-4",children:"Phone Book"}),e.jsxs("div",{className:"row g-2 mb-3 align-items-center",children:[e.jsx("div",{className:"col-12 col-md-8",children:e.jsxs("form",{onSubmit:k,className:"row g-2",children:[e.jsx("div",{className:"col-12 col-sm-6 col-md-8",children:e.jsx("input",{type:"text",name:"search",className:"form-control",placeholder:"Search Name, Phone, City, State, Postcode...",value:b.search,onChange:s=>g("search",s.target.value)})}),e.jsx("div",{className:"col-auto",children:e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Search"})}),e.jsx("div",{className:"col-auto",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:S,children:"Reset"})})]})}),e.jsx("div",{className:"col-12 col-md-4 text-md-end mt-2 mt-md-0",children:e.jsx(t,{href:route("phone_numbers.create"),className:"btn btn-success w-100 mt-2 w-md-auto",children:"Add Record"})})]}),y?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped table-bordered phonebook-table",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{style:{minWidth:"180px"},children:e.jsxs(t,{...d("name"),className:"text-decoration-none text-dark",children:["Name ",c("name")]})}),e.jsx("th",{style:{minWidth:"140px"},children:e.jsxs(t,{...d("phone"),className:"text-decoration-none text-dark",children:["Phone ",c("phone")]})}),e.jsx("th",{style:{minWidth:"140px"},children:e.jsxs(t,{...d("city"),className:"text-decoration-none text-dark",children:["City ",c("city")]})}),e.jsx("th",{style:{minWidth:"120px"},children:e.jsxs(t,{...d("state"),className:"text-decoration-none text-dark",children:["State ",c("state")]})}),e.jsx("th",{style:{minWidth:"120px"},children:e.jsxs(t,{...d("postcode"),className:"text-decoration-none text-dark",children:["Postcode ",c("postcode")]})})]})}),e.jsx("tbody",{children:i.data.map(s=>{const o=s.first_name?s.first_name.charAt(0).toUpperCase():"",h=`${s.surname??""}, ${o}`.trim(),r=route("phone_numbers.show",s.id);return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx(t,{href:r,className:"text-decoration-none text-dark",children:h})}),e.jsx("td",{children:e.jsx(t,{href:r,className:"text-decoration-none text-dark",children:s.phone})}),e.jsx("td",{children:e.jsx(t,{href:r,className:"text-decoration-none text-dark",children:s.city})}),e.jsx("td",{children:e.jsx(t,{href:r,className:"text-decoration-none text-dark",children:s.state})}),e.jsx("td",{children:e.jsx(t,{href:r,className:"text-decoration-none text-dark",children:s.postcode})})]},s.id)})})]})}):e.jsx("p",{children:"No contacts found."}),i?.links&&i.links.length>1&&e.jsx("div",{className:"pagination-container",children:e.jsx("nav",{children:e.jsx("ul",{className:"pagination mb-0",children:(()=>{const s=i.links,o=5,h=s.findIndex(a=>a.active);let r=Math.max(h-2,1),l=Math.min(h+2,s.length-2);l-r<o-1&&(r===1?l=Math.min(r+(o-1),s.length-2):r=Math.max(l-(o-1),1));const n=[],p=s[0];n.push(e.jsx("li",{className:`page-item ${p.url===null?"disabled":""}`,children:p.url?e.jsx(t,{className:"page-link",href:p.url,preserveScroll:!0,preserveState:!0,children:"«"}):e.jsx("span",{className:"page-link",children:"«"})},"prev")),r>1&&(n.push(e.jsx("li",{className:"page-item",children:e.jsx(t,{className:"page-link",href:s[1].url,preserveScroll:!0,preserveState:!0,dangerouslySetInnerHTML:{__html:s[1].label}})},"1")),r>2&&n.push(e.jsx("li",{className:"page-item disabled",children:e.jsx("span",{className:"page-link",children:"…"})},"dots-start")));for(let a=r;a<=l;a++){const j=s[a];n.push(e.jsx("li",{className:`page-item ${j.active?"active":""}`,children:e.jsx(t,{className:"page-link",href:j.url,preserveScroll:!0,preserveState:!0,dangerouslySetInnerHTML:{__html:j.label}})},a))}if(l<s.length-2){l<s.length-3&&n.push(e.jsx("li",{className:"page-item disabled",children:e.jsx("span",{className:"page-link",children:"…"})},"dots-end"));const a=s.length-2;n.push(e.jsx("li",{className:"page-item",children:e.jsx(t,{className:"page-link",href:s[a].url,preserveScroll:!0,preserveState:!0,dangerouslySetInnerHTML:{__html:s[a].label}})},a))}const u=s[s.length-1];return n.push(e.jsx("li",{className:`page-item ${u.url===null?"disabled":""}`,children:u.url?e.jsx(t,{className:"page-link",href:u.url,preserveScroll:!0,preserveState:!0,children:"»"}):e.jsx("span",{className:"page-link",children:"»"})},"next")),n})()})})})]})}export{L as default};
